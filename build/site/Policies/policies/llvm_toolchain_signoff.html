<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: RISC-V ISA Documentation Library Antora Demo Site</title>
    <link rel="canonical" href="https://docs.riscv.org/Policies/policies/llvm_toolchain_signoff.html">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.riscv.org">RISC-V ISA Documentation Library Antora Demo Site</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="Policies" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">RISC-V Technical Policies</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../isa/index.html">RISC-V Documentatation Library</a></div>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">RISC-V Technical Policies</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
<div class="edit-this-page"><a href="https://github.com/riscv-admin/policies/edit/6-update-repo-structure-description-for-antora-layout/modules/policies/pages/llvm_toolchain_signoff.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="llvm_toochain_singoff"><a class="anchor" href="#llvm_toochain_singoff"></a>LLVM Tool Chain Sign-Off Criteria</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Version:</strong> 0.1<br>
<strong>One line description:</strong> Criteria for acceptance of LLVM tool chain<br>
<strong>Author(s):</strong> Nidal Faour, Jeremy Bennett, Ed Jones<br>
<strong>Status:</strong> Draft<br></p>
</div>
<div class="paragraph">
<p><strong>Version History:</strong><br></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 5.5555%;">
<col style="width: 16.6666%;">
<col style="width: 55.5555%;">
<col style="width: 22.2224%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Ver</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Name(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-05-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pre-review draft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nidal Faour, Jeremy Bennett, Ed Jones</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_rationale"><a class="anchor" href="#_rationale"></a>Rationale</h3>
<div class="paragraph">
<p>Various task groups commission work to add LLVM toolchain support for
extensions and features. This policy provides a baseline set of sign-off
criteria. It also serves as a framework for other software projects
requiring sign-off criteria.</p>
</div>
<div class="paragraph">
<p>Components affected are Clang (driver/frontend), LLVM assembler, LLVM
linker (lld), LLVM IR, lldb, libcxx. Not all of these are necessarily
affected. Typically only C/C++ support is considered, but for some
projects, support for other languages may be appropriate.</p>
</div>
</div>
<div class="sect2">
<h3 id="_policy"><a class="anchor" href="#_policy"></a>Policy</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The project should have added regression (LLVM unit test, LLVM
internal, LLVM lit).<br></p>
</li>
<li>
<p>Tests in the following categories where relevant.<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Target-specific LLVM assembler and disassembler regression tests of
new instructions or assembler directives, including tests expected to
fail, testing boundary and median cases (llvm/test/MC/RISCV). When
appropriate testing must include tests of -march flag extensions to
verify new instructions are only available when the flag(s) is/are set
and that they are not available when not set.<br></p>
</li>
<li>
<p>LLVM assembler target-specific regression tests to ensure correct
generation of any new relocations added (llvm/test/MC/RISCV).<br></p>
</li>
<li>
<p>LLVM linker (lld) regression tests (lld/test/ELF) for any new
relocations supported by the LLVM linker.<br></p>
</li>
<li>
<p>LLVM libcxx using LIT to run libcxx testsuits and running
benchmarks.<br></p>
</li>
<li>
<p>LLVM Debugger (LLDB) test suite (LLDB unit tests, shell tests, API
tests)<br></p>
</li>
<li>
<p>Clang driver/frontend tests for any changes to the command line
interface (flags, search directories, multilibs) and preprocessor
defines (tests in clang/test/Driver).<br></p>
</li>
<li>
<p>Clang regression target-specific code generation tests for all new
builtins (clang/test/CodeGen/RISCV).<br></p>
</li>
<li>
<p>LLVM code generation tests for any new intrinsic functions or changes
to instruction generation (llvm/test/CodeGen/RISCV).<br></p>
</li>
<li>
<p>LLVM IR and code generation tests for any new RISCV-specific
optimizations (llvm/test/CodeGen/RISCV).<br></p>
</li>
</ol>
</div>
</li>
<li>
<p>For LLVM compilers intended for use with application class processors,
the project should run the LLVM test suite, a collection of application
programs.<br></p>
</li>
<li>
<p>The project should have added the subset of the GCC regression test
suite suitable for use with Clang/LLM. The reason why many Clang/LLVM
ports do this is that the LLVM regression tests only test as far as IR,
there are no general execution tests (the LLVM test suite is a
collection of applications, but only runs on larger machines under
"full-fat" operating systems).<br></p>
</li>
<li>
<p>The project should have added GCC regression tests in the following
categories where relevant.<br></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>GNU compiler target specific tests of all new code generation
patterns, builtins, intrinsic functions and preprocessor defines.<br></p>
</li>
<li>
<p>GNU compiler C/C++ target specific regression tests of <strong>-march</strong> flag
extensions, both to verify that new builtins/intrinsics/preprocessor
defines are available when the flag(s) is/are set and that they are not
available when not set<br></p>
</li>
<li>
<p>GNU compiler C/C++ target specific regression tests of libgcc and
newlib multilibs (these tests may belong here, or in the libraries)<br></p>
</li>
</ol>
</div>
</li>
<li>
<p>Provide LLVM regression test results, GCC regression test results and
(where appropriate) LLVM test suite results, which should demonstrate no
new failures or unresolved tests compared to the upstream compiler and
with all added tests passing. Total new successes (passes or expected
failures) should match the number added above.<br></p>
</li>
<li>
<p>RISC-V architectural compliance tests (ACT) for underlying
architecture should pass (i.e. we haven’t done anything to break base
architectures).<br></p>
</li>
<li>
<p>Agreed benchmark results should be presented. The choice of benchmark
will depend on the specific project. For example
<a href="https://www.embench.org/">Embench</a> may be appropriate for a project
targeting small integer RV32 machines, but not for a project targeting
large multicore RV32G machines. General projects may require multiple
sets of benchmarks.<br></p>
</li>
<li>
<p>Any submitted patches must follow the
<a href="https://llvm.org/docs/CodingStandards.html">LLVM coding standards</a> .
Changes should be submitted according to the
<a href="https://llvm.org/docs/DeveloperPolicy.html">LLVM developer policy</a>.<br></p>
</li>
<li>
<p>An appropriate upstream code owner reviews and approves the patches.
Note: Anybody is allowed to review code for submission to the LLVM
project, but you should seek approval from a well-known RISC-V
contributor. If submitting a change which touches generic code, wait for
additional approval from a maintainer of that code (the LLVM developer
policy has a section on finding appropriate reviewers). For a large
change affecting other targets or many generic components, propose the
changes through an RFC to the llvm-dev mailing list and link to the
submitted patch.<br></p>
</li>
<li>
<p>The project must be signed off by the Toolchain &amp; Runtimes SSC, who
have responsibility for coordination with other projects and can defer
that sign-off and responsibility to appropriate subcommittees.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_exception_handling"><a class="anchor" href="#_exception_handling"></a>Exception handling<br></h3>
<div class="paragraph">
<p>None</p>
</div>
</div>
<div class="sect2">
<h3 id="_transition_to_start_using_policy"><a class="anchor" href="#_transition_to_start_using_policy"></a>Transition to start using policy<br></h3>
<div class="paragraph">
<p>Immediate on approval</p>
</div>
</div>
<div class="sect2">
<h3 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next steps</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Review by T&amp;R mailing list with timeout to the next T&amp;R meeting.<br></p>
</li>
<li>
<p>Review of policy with recommendation by TSC &amp; Chairs with a two week
timeout on immediately following next T&amp;R meeting (extendable on request
by reviewers by two weeks).<br></p>
</li>
<li>
<p>Identify at least two specific people from TSC to review the policy
before it is approved.<br></p>
</li>
<li>
<p>Have the TSC chair and CTO review the proposal.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
